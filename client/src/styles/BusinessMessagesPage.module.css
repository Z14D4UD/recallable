/* ======= base layout ======= */
.container { position:relative; min-height:100vh; background:#fefefe; font-family:Arial,sans-serif; color:#333; }
.header   { display:flex; align-items:center; justify-content:space-between; padding:1rem 1.5rem; box-shadow:0 2px 6px rgba(0,0,0,.1); background:#fff; position:fixed; top:0; left:0; right:0; z-index:100; }
.headerLeft{display:flex; align-items:center; gap:.5rem;}
.backBtn,.menuIcon{font-size:1.2rem; background:none; border:none; cursor:pointer;}
.headerTitle{font-size:1.4rem; font-weight:600;}
.content{display:flex; margin-top:70px; height:calc(100vh - 70px);}
.hideLeft .leftPane{display:none;}

/* ======= left pane ======= */
.leftPane{width:320px; border-right:1px solid #eee; background:#fff; display:flex; flex-direction:column; overflow-y:auto;}
.messagesHeader{padding:1rem; border-bottom:1px solid #eee;}
.messagesHeader h2{margin:0 0 .8rem; font-size:1.4rem;}
.filterRow{display:flex; gap:.5rem;}
.filterButton{background:#e0e0e0; border:none; border-radius:9999px; padding:.4rem 1rem; cursor:pointer; font-size:.9rem;}
.activeFilter{background:#333 !important; color:#fff !important;}
.searchRow{display:flex; gap:.5rem; margin-top:.5rem;}
.searchInput{flex:1; padding:.4rem; border-radius:9999px; border:1px solid #ccc;}
.cancelSearchBtn{background:none; border:none; cursor:pointer; font-size:.9rem; padding:.4rem .8rem;}
.conversationList{flex:1; overflow-y:auto; padding:.5rem;}
.conversationItem{display:flex; align-items:center; padding:.8rem; border-bottom:1px solid #f0f0f0; cursor:pointer;}
.conversationItem:hover{background:#fafafa;}
.selectedConv{background:#e8e8e8;}
.convAvatar{width:32px; height:32px; border-radius:50%; object-fit:cover; margin-right:.6rem;}
.convoText{flex:1;}
.conversationTitle{font-weight:600;}
.conversationSnippet{font-size:.9rem; color:#666;}
.unreadBadge{background:#ff3b30; color:#fff; border-radius:50%; padding:.2rem .5rem; font-size:.75rem;}
.noConversations{padding:1rem; color:#666; font-size:.9rem;}

/* ======= context menu ======= */
.contextMenu{position:absolute; background:#fff; box-shadow:0 2px 8px rgba(0,0,0,.15); border-radius:4px; z-index:200;}
.contextMenu button{display:block; width:100%; padding:.6rem 1rem; background:none; border:none; text-align:left; cursor:pointer;}
.contextMenu button:hover{background:#f2f2f2;}

/* ======= right pane ======= */
.rightPane{flex:1; display:flex; flex-direction:column; background:#f9f9f9;}
.messageThread{flex:1; overflow-y:auto; padding:1rem; display:flex; flex-direction:column; gap:1rem;}
.messageItem{display:flex; max-width:70%; padding:.6rem; border-radius:8px; box-shadow:0 1px 3px rgba(0,0,0,.1);}

/* avatar + bubble internals */
.msgAvatar{width:28px; height:28px; border-radius:50%; object-fit:cover; margin-right:.6rem;}
.messageBubble{display:flex; flex-direction:column;}
.msgName{font-size:.85rem; font-weight:600; margin-bottom:.2rem;}
.messageText{line-height:1.4;}
.attachmentWrapper a{text-decoration:underline; font-size:.9rem;}
.messageTimestamp{font-size:.75rem; text-align:right; margin-top:.3rem;}

/* composer */
.messageInputArea{display:flex; align-items:center; padding:.5rem; background:#fff; border-top:1px solid #eee; position:sticky; bottom:0; z-index:50;}
.textArea{flex:1; border:1px solid #ccc; border-radius:4px; min-height:40px; max-height:80px; padding:.4rem;}
.attachmentInput{display:none;}
.sendButton{background:#38b6ff; color:#fff; border:none; padding:.5rem 1rem; border-radius:20px; cursor:pointer; margin-left:.5rem;}

/* ======= force colours / sides ======= */
.messageItem[data-biz="true"] { align-self:flex-end !important; background:#38b6ff !important; color:#fff !important; }
.messageItem[data-biz="false"]{ align-self:flex-start !important; background:#fff    !important; color:#333 !important; }

/* ======= mobile tweaks ======= */
@media(max-width:900px){
  .content{flex-direction:column; height:auto;}
  .leftPane{width:100%; border-right:none; border-bottom:1px solid #eee;}
  .rightPane{width:100%; height:auto;}
}
